{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { BNavbar, BNavbarBrand } from 'bootstrap-vue';\nexport default {\n  components: {\n    BNavbar: BNavbar,\n    BNavbarBrand: BNavbarBrand\n  },\n  data: function data() {\n    var appName = '';\n    return {\n      appName: appName,\n      pesoFrete: 0,\n      pesoAnt: 0,\n      cidadeSelecionada: '',\n      cidades: [],\n      freteBarato: null,\n      freteRapido: null,\n      apiData: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.appName = 'Melhor Frete';\n    var apiUrl = 'http://localhost:3000/transport';\n    console.log('Oii'); // Fetch nos dados da API\n\n    fetch(apiUrl).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      // Armazenando o dataset em uma variável para utilização nos methods.\n      _this.apiData = data; // Retornando as cidades únicas para o objeto cidades e formatando os dados para tipo Float/Inteiro.\n\n      var cidadesUnicas = {};\n\n      for (var i = 0; i < data.length; i++) {\n        var obj = data[i];\n        cidadesUnicas[obj.city] = true;\n        _this.apiData[i].cost_transport_light = parseFloat(_this.apiData[i].cost_transport_light.replace(/[^0-9.]/g, ''));\n        _this.apiData[i].cost_transport_heavy = parseFloat(_this.apiData[i].cost_transport_heavy.replace(/[^0-9.]/g, ''));\n        _this.apiData[i].lead_time = parseInt(_this.apiData[i].lead_time);\n      }\n\n      _this.cidades = Object.keys(cidadesUnicas);\n    }).catch(function (error) {\n      console.error('Erro ao obter dados do frete:', error);\n    });\n  },\n  watch: {\n    pesoFrete: function pesoFrete(newValue) {\n      this.pesoFrete = parseFloat(newValue);\n    }\n  },\n  methods: {\n    // Implemente aqui os metodos utilizados na pagina\n    methodFoo: function methodFoo() {\n      var _this2 = this;\n\n      // Filtrando para pegar somente a cidade selecionada.\n      var freteFiltrado = this.apiData.filter(function (frete) {\n        return frete.city === _this2.cidadeSelecionada;\n      });\n      console.log(freteFiltrado); // Definição do peso baseado no input.\n\n      this.pesoAnt = this.pesoFrete; // Função sort para menor preço, dividindo em pesos.\n\n      if (this.pesoAnt <= 100) {\n        freteFiltrado.sort(function (a, b) {\n          return a.cost_transport_light - b.cost_transport_light;\n        });\n        this.freteBarato = freteFiltrado[0];\n      } else if (this.pesoAnt > 100) {\n        freteFiltrado.sort(function (a, b) {\n          return a.cost_transport_heavy - b.cost_transport_heavy;\n        });\n        this.freteBarato = freteFiltrado[0];\n      } // Função sort para menor tempo.\n\n\n      freteFiltrado.sort(function (a, b) {\n        return a.lead_time - b.lead_time;\n      });\n      this.freteRapido = freteFiltrado[0];\n      console.log(this.freteRapido);\n    },\n    // Método para formatar o custo total economico.\n    formatarCustoTotalEconomica: function formatarCustoTotalEconomica() {\n      var custoTotal;\n\n      if (this.pesoAnt <= 100) {\n        custoTotal = this.freteBarato.cost_transport_light * this.pesoAnt;\n        return custoTotal.toFixed(2);\n      } else if (this.pesoAnt > 100) {\n        custoTotal = this.freteBarato.cost_transport_heavy * this.pesoAnt;\n        return custoTotal.toFixed(2);\n      } // Método para formatar o custo total frete rápido.\n\n    },\n    formatarCustoTotalRapida: function formatarCustoTotalRapida() {\n      var custoTotal;\n\n      if (this.pesoAnt <= 100) {\n        custoTotal = this.freteRapido.cost_transport_light * this.pesoAnt;\n        return custoTotal.toFixed(2);\n      } else if (this.pesoAnt > 100) {\n        custoTotal = this.freteRapido.cost_transport_heavy * this.pesoAnt;\n        return custoTotal.toFixed(2);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,SACAA,OADA,EAEAC,YAFA,QAGA,eAHA;AAKA;AACAC;AACAF,oBADA;AAEAC;AAFA,GADA;AAKAE,MALA,kBAKA;AACA;AAEA;AACAC,sBADA;AAEAC,kBAFA;AAGAC,gBAHA;AAIAC,2BAJA;AAKAC,iBALA;AAMAC,uBANA;AAOAC,uBAPA;AAQAC;AARA;AAUA,GAlBA;AAmBAC,SAnBA,qBAmBA;AAAA;;AACA;AACA;AACAC,uBAHA,CAKA;;AACAC,kBACAC,IADA,CACA;AAAA;AAAA,KADA,EAEAA,IAFA,CAEA;AAEA;AACA,2BAHA,CAKA;;AACA;;AACA;AACA;AACAC;AACA;AACA;AACA;AACA;;AAEA;AAEA,KAnBA,EAoBAC,KApBA,CAoBA;AACAJ;AACA,KAtBA;AAuBA,GAhDA;AAkDAK;AACAb,aADA,qBACAc,QADA,EACA;AACA;AACA;AAHA,GAlDA;AAuDAC;AACA;AACAC,aAFA,uBAEA;AAAA;;AACA;AACA;AAAA;AAAA;AACAR,iCAHA,CAIA;;AACA,oCALA,CAMA;;AACA;AACAS;AAAA;AAAA;AACA;AAEA,OAJA,MAKA;AACAA;AAAA;AAAA;AACA;AACA,OAfA,CAgBA;;;AACAA;AAAA;AAAA;AACA;AAEAT;AACA,KAvBA;AAwBA;AACAU,+BAzBA,yCAyBA;AACA;;AACA;AACAC;AAEA;AACA,OAJA,MAKA;AACAA;AAEA;AACA,OAXA,CAYA;;AACA,KAtCA;AAuCAC,4BAvCA,sCAuCA;AACA;;AACA;AACAD;AAEA;AACA,OAJA,MAKA;AACAA;AAEA;AACA;AAEA;AApDA;AAvDA","names":["BNavbar","BNavbarBrand","components","data","appName","pesoFrete","pesoAnt","cidadeSelecionada","cidades","freteBarato","freteRapido","apiData","created","console","fetch","then","cidadesUnicas","catch","watch","newValue","methods","methodFoo","freteFiltrado","formatarCustoTotalEconomica","custoTotal","formatarCustoTotalRapida"],"sourceRoot":"src/components","sources":["BestTransport.vue"],"sourcesContent":["<template>\n  <div class=\"title\">\n    <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"info\">\n      <b-navbar-brand class=\"ml-2\">\n        <b>{{ appName }}</b>\n      </b-navbar-brand>\n    </b-navbar>\n\n    <div class=\"form-group\">\n      <label for=\"peso\">Peso do frete:</label>\n      <input type=\"number\" id=\"peso\" class=\"form-control\" v-model=\"pesoFrete\">\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"city\">Cidade de destino:</label>\n      <select id=\"city\" class=\"form-control\" v-model=\"cidadeSelecionada\">\n        <option v-for=\"city in cidades\" :key=\"city\"> {{ city }}</option>\n      </select>\n    </div>\n    <button class=\"btn btn-primary\" @click=\"methodFoo\">Analisar</button>\n\n    <!-- Divisão com v-if para peso, e tipo de frete. -->\n    <div v-if=\"freteBarato && pesoAnt <= 100\">\n    <h3>Frete mais econômico:</h3>\n    <p>Transportadora: {{freteBarato.name}}</p>\n    <p>Custo total: R${{ formatarCustoTotalEconomica() }}</p>\n    <p>Tempo de entrega: {{ freteBarato.lead_time}} horas</p>\n    </div>\n\n    <div v-if=\"freteBarato && pesoAnt > 100\">\n      <h3>Frete mais econômico:</h3>\n      <p>Transportadora: {{freteBarato.name}}</p>\n      <p>Custo total: R$ {{ formatarCustoTotalEconomica()}}</p>\n      <p>Tempo de entrega: {{freteBarato.lead_time}} horas</p>\n    </div>\n\n    <div v-if=\"freteRapido && pesoAnt > 100\">\n      <h3>Frete mais rápido:</h3>\n      <p>Transportadora: {{freteRapido.name}}</p>\n      <p>Custo total: R$ {{ formatarCustoTotalRapida()}}</p>\n      <p>Tempo de entrega: {{freteRapido.lead_time}} horas</p>\n    </div>\n\n    <div v-if=\"freteRapido && pesoAnt <= 100\">\n      <h3>Frete mais rápido:</h3>\n      <p>Transportadora: {{freteRapido.name}}</p>\n      <p>Custo total: R$ {{ formatarCustoTotalRapida()}}</p>\n      <p>Tempo de entrega: {{freteRapido.lead_time}} horas</p>\n    </div>\n  </div>\n\n\n</template>\n\n<script>\nimport {\n  BNavbar,\n  BNavbarBrand,\n} from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BNavbar,\n    BNavbarBrand,\n  },\n  data() {\n    const appName = ''\n\n    return {\n      appName,\n      pesoFrete: 0,\n      pesoAnt: 0,\n      cidadeSelecionada: '',\n      cidades: [],\n      freteBarato: null,\n      freteRapido: null,\n      apiData: [],\n    }\n  },\n  created() {\n    this.appName = 'Melhor Frete'\n    const apiUrl = 'http://localhost:3000/transport'\n    console.log('Oii')\n\n    // Fetch nos dados da API\n    fetch (apiUrl)\n    .then (response => response.json())\n    .then(data =>{\n\n        // Armazenando o dataset em uma variável para utilização nos methods.\n        this.apiData = data;\n\n        // Retornando as cidades únicas para o objeto cidades e formatando os dados para tipo Float/Inteiro.\n        let cidadesUnicas = {};\n        for (let i = 0; i < data.length; i++){\n          let obj = data[i];\n          cidadesUnicas[obj.city] = true;\n          this.apiData[i].cost_transport_light = parseFloat(this.apiData[i].cost_transport_light.replace(/[^0-9.]/g, ''))\n          this.apiData[i].cost_transport_heavy = parseFloat(this.apiData[i].cost_transport_heavy.replace(/[^0-9.]/g, ''))\n          this.apiData[i].lead_time = parseInt(this.apiData[i].lead_time)\n        }\n\n        this.cidades = Object.keys(cidadesUnicas);\n        \n})\n    .catch(error =>{\n        console.error('Erro ao obter dados do frete:', error);\n      })\n  },\n\n  watch: {\n  pesoFrete(newValue) {\n    this.pesoFrete = parseFloat(newValue);\n  }\n  },\n  methods: {\n    // Implemente aqui os metodos utilizados na pagina\n    methodFoo() {\n      // Filtrando para pegar somente a cidade selecionada.\n      const freteFiltrado = this.apiData.filter(frete => frete.city === this.cidadeSelecionada)\n      console.log(freteFiltrado)\n      // Definição do peso baseado no input.\n      this.pesoAnt = this.pesoFrete\n      // Função sort para menor preço, dividindo em pesos.\n      if (this.pesoAnt <= 100){\n        freteFiltrado.sort((a, b) => a.cost_transport_light - b.cost_transport_light)\n        this.freteBarato = freteFiltrado[0];\n\n      }\n      else if (this.pesoAnt > 100){\n        freteFiltrado.sort((a, b) => a.cost_transport_heavy - b.cost_transport_heavy)\n        this.freteBarato = freteFiltrado[0];\n      }\n      // Função sort para menor tempo.\n      freteFiltrado.sort((a, b) => a.lead_time - b.lead_time)\n      this.freteRapido = freteFiltrado[0];\n\n      console.log(this.freteRapido);\n    },\n    // Método para formatar o custo total economico.\n    formatarCustoTotalEconomica() {\n      let custoTotal;\n      if (this.pesoAnt <= 100){\n      custoTotal = this.freteBarato.cost_transport_light * this.pesoAnt;\n\n      return custoTotal.toFixed(2);\n      }\n      else if (this.pesoAnt > 100){\n      custoTotal = this.freteBarato.cost_transport_heavy * this.pesoAnt\n        \n      return custoTotal.toFixed(2);\n      }\n    // Método para formatar o custo total frete rápido.\n    },\n    formatarCustoTotalRapida() {\n      let custoTotal;\n      if (this.pesoAnt <= 100){\n      custoTotal = this.freteRapido.cost_transport_light * this.pesoAnt;\n\n      return custoTotal.toFixed(2);\n      }\n      else if (this.pesoAnt > 100){\n      custoTotal = this.freteRapido.cost_transport_heavy * this.pesoAnt\n        \n      return custoTotal.toFixed(2);\n      }\n\n    }\n  },\n}\n</script>\n\n<style scoped>\n.title .navbar {\n  background-color: #00aca6 !important;\n}\n\n.title .navbar-brand {\n  margin-left: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}